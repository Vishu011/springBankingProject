<h2>Payments â€” Internal Transfer</h2>

<div class="card">
  <form [formGroup]="transferForm" (ngSubmit)="initiate()">
    <div style="display:flex; gap:12px; flex-wrap:wrap;">
      <label>
        Customer ID
        <input type="number" formControlName="customerId" placeholder="e.g. 1001" />
      </label>
      <label>
        From Account
        <input type="text" formControlName="fromAccount" placeholder="FROM account number" />
      </label>
      <label>
        To Account
        <input type="text" formControlName="toAccount" placeholder="TO account number" />
      </label>
      <label>
        Amount
        <input type="number" step="0.01" formControlName="amount" placeholder="100.00" />
      </label>
      <label>
        Currency
        <select formControlName="currency">
          <option value="USD">USD</option>
        </select>
      </label>
      <button type="submit" [disabled]="busy || transferForm.invalid">Initiate Transfer</button>
    </div>
  </form>

  <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
    <button type="button" (click)="pollStatus()" [disabled]="busy || !paymentId">Poll Status</button>
    <button type="button" (click)="readBalances()" [disabled]="busy || !transferForm.value.fromAccount || !transferForm.value.toAccount">Read Balances</button>
  </div>

  <div style="margin-top:10px;">
    <div>paymentId: <b>{{ paymentId || '-' }}</b></div>
    <div>status: <b>{{ status || '-' }}</b></div>
  </div>

  <div style="margin-top:10px; display:flex; gap:24px; flex-wrap:wrap;">
    <div>From Balance: <b *ngIf="fromBalance !== null">{{ fromBalance }}</b><span *ngIf="fromBalance === null">-</span></div>
    <div>To Balance: <b *ngIf="toBalance !== null">{{ toBalance }}</b><span *ngIf="toBalance === null">-</span></div>
  </div>
</div>

<div class="card" *ngIf="busy">Working...</div>
<div class="card" *ngIf="errorMsg" style="border:1px solid #7f1d1d; background:#1b0b0b;">
  <b>Error:</b> {{ errorMsg }}
</div>
