<!-- Navigation Header -->
<nav class="dashboard-navbar">
  <div class="nav-container">
    <div class="nav-brand">
      <div class="nav-logo">
        <!-- <i class="fas fa-university"></i> -->
        <!-- Replace with your bank logo -->
        <img src="/assets/images/omni-logo.png" alt="Bank Logo" class="nav-logo-img">
      </div>
      <div class="nav-brand-text">
        <h3>OMNI BANK</h3>
        <span>Secure. Seamless. Smart.</span>
      </div>
    </div>

    <div class="nav-user-section">
      <div class="user-welcome" *ngIf="authService.isLoggedIn()">
        <div class="user-avatar">
          <i class="fas fa-user-circle"></i>
        </div>
        <div class="user-info">
          <span class="user-greeting">Hello Again!</span>
          <span class="user-name">{{ authService.getIdentityClaims()?.preferred_username || 'User' }}</span>
        </div>
      </div>

      <button (click)="logout()" class="logout-button" *ngIf="authService.isLoggedIn()">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </button>
    </div>
  </div>
</nav>
<!-- Main Dashboard Content -->
<div class="dashboard-wrapper">
  <!-- Not Logged In State -->
  <div *ngIf="!authService.isLoggedIn()" class="not-logged-in">
    <div class="login-prompt">
      <div class="prompt-icon">
        <i class="fas fa-lock"></i>
      </div>
      <h2>Access Required</h2>
      <p>You need to be logged in to access your dashboard</p>
      <button routerLink="/login" class="login-redirect-button">
        <i class="fas fa-sign-in-alt"></i>
        <span>Go to Login</span>
      </button>
    </div>
  </div>

  <!-- Logged In Dashboard -->
  <div *ngIf="authService.isLoggedIn()" class="dashboard-content">
    <!-- Welcome Section -->
    <div class="welcome-section">
      <div class="welcome-card">
        <div class="welcome-icon">
          <i class="fa fa-address-card" aria-hidden="true"></i>
        </div>
        <div class="welcome-text">
          <h1>Your Dashboard, Your Decisions</h1>
          <p>Take Control with Confidence and Bank-Grade Security</p>
        </div>
        <div class="welcome-decoration">
          <div class="floating-icon">
            <i class="fa-solid fa-dollar-sign"></i>
          </div>
          <!-- <i class="fa-solid fa-landmark"></i> -->
        </div>
      </div>
    </div>

    <!-- User Profile Section -->
    <div class="profile-section">
      <div class="section-header">
        <div class="header-icon">
          <i class="fas fa-user-circle"></i>
        </div>
        <h2>My Banking Profile</h2>
        <div class="header-decoration"></div>
      </div>

      <!-- Loading State -->
      <div *ngIf="loadingProfile" class="loading-card">
        <div class="loading-content">
          <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
          </div>
          <p>Loading your profile...</p>
        </div>
      </div>

      <!-- Error State -->
      <div *ngIf="profileError" class="error-card">
        <div class="error-content">
          <i class="fas fa-exclamation-triangle"></i>
          <h3>Unable to Load Profile</h3>
          <p>{{ profileError }}</p>
          <button (click)="loadUserProfile()" class="retry-button">
            <i class="fas fa-redo"></i>
            <span>Try Again</span>
          </button>
        </div>
      </div>

      <!-- Profile Content -->
      <div *ngIf="userProfile && !loadingProfile" class="profile-content">
        <div class="profile-card">
          <div class="profile-header">
            <div class="profile-avatar-large">
              <i class="fas fa-user"></i>
            </div>
            <div class="profile-name">
              <h3>{{ userProfile.firstName }} {{ userProfile.lastName }}</h3>
              <p>{{ userProfile.email }}</p>
            </div>
            <div class="kyc-badge" [ngClass]="getKycStatusClass(userProfile.kycStatus)">
              <i [class]="getKycStatusIcon(userProfile.kycStatus)"></i>
              <span>{{ userProfile.kycStatus }}</span>
            </div>
          </div>

          <div class="profile-details">
            <div class="detail-item">
              <div class="detail-icon">
                <i class="fas fa-id-badge"></i>
              </div>
              <div class="detail-info">
                <span class="detail-label">Contact Number</span>
                <span class="detail-value">{{ userProfile.phoneNumber }}</span>
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-icon">
                <i class="fas fa-envelope"></i>
              </div>
              <div class="detail-info">
                <span class="detail-label">Email Address</span>
                <span class="detail-value">{{ userProfile.email }}</span>
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-icon">
                <i class="fas fa-user-tag"></i>
              </div>
              <div class="detail-info">
                <span class="detail-label">Account Role</span>
                <span class="detail-value">{{ userProfile.role }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- KYC Status Section -->
        <div class="kyc-status-section">
          <ng-container [ngSwitch]="userProfile.kycStatus">
            <div *ngSwitchCase="KycStatus.PENDING" class="kyc-status-card kyc-pending">
              <div class="kyc-icon">
                <i class="fas fa-id-card"></i>
              </div>
              <div class="kyc-content">
                <h3>KYC Required</h3>
                <p>Complete your KYC verification to unlock all banking features.</p>
                <ul class="kyc-checklist">
                  <li><i class="fas fa-list"></i> Provide Aadhar, PAN and address details</li>
                  <li><i class="fas fa-file-upload"></i> Upload supporting documents</li>
                  <li><i class="fas fa-shield-alt"></i> Secure review by our team</li>
                </ul>
                <button routerLink="/kyc" class="proceed-button">
                  <i class="fas fa-arrow-right"></i>
                  <span>Complete KYC Now</span>
                </button>
              </div>
            </div>

            <div *ngSwitchCase="KycStatus.REJECTED" class="kyc-status-card kyc-rejected">
              <div class="kyc-icon">
                <i class="fas fa-times-circle"></i>
              </div>
              <div class="kyc-content">
                <h3>KYC Verification Rejected</h3>
                <p>Your KYC was not approved. You may re-submit with corrected details and clearer documents.</p>
                <div class="actions">
                  <button routerLink="/kyc" class="proceed-button">
                    <i class="fas fa-redo"></i>
                    <span>Re-submit KYC</span>
                  </button>
                  <button class="contact-support-button" (click)="contactSupport()">
                    <i class="fas fa-headset"></i>
                    <span>Contact Support</span>
                  </button>
                </div>
              </div>
            </div>

            <div *ngSwitchCase="KycStatus.VERIFIED" class="kyc-status-card kyc-verified">
              <div class="kyc-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <div class="kyc-content">
                <h3>KYC Verified Successfully!</h3>
                <p>Congratulations! Your account is fully verified and you have access to all banking features.</p>
                <button routerLink="/banking-features" class="proceed-button">
                  <i class="fas fa-arrow-right"></i>
                  <span>Access Banking Services</span>
                </button>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>

    <!-- Banking Services Section -->
    <div class="services-section">
      <div class="section-header">
        <div class="header-icon">
          <i class="fas fa-concierge-bell"></i>
        </div>
        <h2>Our Banking Services</h2>
        <div class="header-decoration"></div>
      </div>

      <div class="services-grid">
        <!-- Account Management -->
        <div class="service-category" routerLink="/accounts">
          <div class="category-header">
            <div class="category-icon">
              <i class="fas fa-user-cog"></i>
            </div>
            <h3>Account Management</h3>
          </div>
          <div class="service-items">
            <div class="service-item">
              <i class="fas fa-plus-circle"></i>
              <span>Account Creation</span>
            </div>
            <div class="service-item">
              <i class="fas fa-search-dollar"></i>
              <span>Balance Inquiry</span>
            </div>
            <div class="service-item">
              <i class="fas fa-info-circle"></i>
              <span>Account Status</span>
            </div>
            <div class="service-item">
              <i class="fas fa-clipboard-list"></i>
              <span>Account Details</span>
            </div>
          </div>
        </div>

        <!-- Transaction Services -->
        <div class="service-category" routerLink="/transactions/deposit">
          <div class="category-header">
            <div class="category-icon">
              <i class="fas fa-exchange-alt"></i>
            </div>
            <h3>Transaction Services</h3>
          </div>
          <div class="service-items">
            <div class="service-item">
              <i class="fas fa-paper-plane"></i>
              <span>Fund Transfers</span>
            </div>
            <div class="service-item">
              <i class="fas fa-piggy-bank"></i>
              <span>Deposits</span>
            </div>
            <div class="service-item">
              <i class="fas fa-money-bill-wave"></i>
              <span>Withdrawals</span>
            </div>
            <div class="service-item">
              <i class="fas fa-history"></i>
              <span>Transaction History</span>
            </div>
          </div>
        </div>

        <!-- Loan Services -->
        <div class="service-category" routerLink="/loans/history">
          <div class="category-header">
            <div class="category-icon">
              <i class="fas fa-hand-holding-usd"></i>
            </div>
            <h3>Loan Services</h3>
          </div>
          <div class="service-items">
            <div class="service-item">
              <i class="fas fa-file-contract"></i>
              <span>Loan Application</span>
            </div>
            <div class="service-item">
              <i class="fas fa-tasks"></i>
              <span>Status Tracking</span>
            </div>
            <div class="service-item">
              <i class="fas fa-calculator"></i>
              <span>EMI Calculator</span>
            </div>
          </div>
        </div>

        <!-- Card Services -->
        <div class="service-category" routerLink="/cards/issue">
          <div class="category-header">
            <div class="category-icon">
              <i class="fas fa-credit-card"></i>
            </div>
            <h3>Card Services</h3>
          </div>
          <div class="service-items">
            <div class="service-item">
              <i class="fas fa-id-card"></i>
              <span>Card Issuance</span>
            </div>
            <div class="service-item">
              <i class="fas fa-shield-alt"></i>
              <span>Card Management</span>
            </div>
            <div class="service-item">
              <i class="fas fa-sliders-h"></i>
              <span>Limit Updates</span>
            </div>
            <div class="service-item">
              <i class="fas fa-eye"></i>
              <span>Card Details</span>
            </div>
          </div>
        </div>

        <!-- Profile Management -->
        <div class="service-category" routerLink="/banking-features">
          <div class="category-header">
            <div class="category-icon">
              <i class="fas fa-user-edit"></i>
            </div>
            <h3>Profile Management</h3>
          </div>
          <div class="service-items">
            <div class="service-item">
              <i class="fas fa-eye"></i>
              <span>Profile Viewing</span>
            </div>
            <div class="service-item">
              <i class="fas fa-edit"></i>
              <span>Profile Updates</span>
            </div>
          </div>
        </div>

        <!-- Notifications -->
        <div class="service-category" routerLink="/banking/notifications">
          <div class="category-header">
            <div class="category-icon">
              <i class="fas fa-bell"></i>
            </div>
            <h3>Notifications</h3>
          </div>
          <div class="service-items">
            <div class="service-item">
              <i class="fas fa-envelope"></i>
              <span>Email Alerts</span>
            </div>
            <div class="service-item">
              <i class="fas fa-sms"></i>
              <span>SMS Notifications</span>
            </div>
            <div class="service-item">
              <i class="fas fa-bolt"></i>
              <span>Real-time Updates</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Background Animation -->
  <div class="background-animation">
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <div class="floating-shape shape-3"></div>
  </div>
</div>

<!-- Chatbot Widget -->
<app-chatbot></app-chatbot>
